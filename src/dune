(executable
  (name i3_ws_rename)
  (modules i3_ws_rename
           lwt_module
           i3_status
           conf
           fa_icons
           utils
           reporter
           modules_inventory
           disk_usage
           load_avg
           cpu
           memory
           i3bar_protocol
           clock)
  (preprocess (pps lwt
                   lwt.unix
                   lwt_ppx
                   ppx_deriving_yojson
                   ppx_deriving.show))
  (libraries i3ipc
             cmdliner
             lwt
             lwt.unix
             lwt_ppx
             logs.fmt
             logs.lwt
             fmt
             lwt-pipe
             base
             core
             shell.unix_extended))

(alias
  (name   compress)
  (deps   i3_ws_rename.exe)
  (action (run upx i3_ws_rename.exe)))

(install
  (section bin)
  (files (i3_ws_rename.exe as i3-ws-rename)))
