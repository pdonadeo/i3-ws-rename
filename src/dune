(executable
  (name i3_ws_rename)
  (modules i3_ws_rename
           lwt_module
           i3_status
           conf
           fa_icons
           utils
           reporter
           disk_usage
           load_avg
           cpu
           memory
           i3bar_protocol
           clock
           volume
           path_exists
           whatsmyip
           unix_ext)
  (foreign_stubs (language c) (names unix_ext_stubs))
  (preprocess (pps lwt
                   lwt.unix
                   lwt_ppx
                   ppx_deriving_yojson
                   ppx_deriving.show))
  (libraries i3ipc
             cmdliner
             lwt
             lwt.unix
             lwt_ppx
             lwt_glib
             logs.fmt
             logs.lwt
             fmt
             lwt-pipe
             curl
             curl.lwt
             glib
             pulse
             batteries))

;(alias
;  (name   compress)
;  (deps   i3_ws_rename.exe)
;  (action (run upx i3_ws_rename.exe)))
(rule
  (alias compress)
  (action (run upx i3_ws_rename.exe))
)

(install
  (section bin)
  (files (i3_ws_rename.exe as i3-ws-rename)))
